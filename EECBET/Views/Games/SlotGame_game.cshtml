@{
    Layout = "~/Views/Shared/_SlotLayout.cshtml";
    ViewBag.Title = " SlotGame_game";
    var isAuthenticated = Context.Session.GetInt32("MemberId") != null;
}
<link rel="stylesheet" href="~/css/slotgameBase.css" asp-append-version="true" />
@model EECBET.Models.GameListViewModel

<style>
    /* ğŸ©¶ é»‘å¹•é®ç½© */
    .login-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.75);
        z-index: 9999;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    .login-overlay.show {
        opacity: 1;
        pointer-events: auto;
    }
</style>


<div class="game-container">

    <button class="closeBtn" onclick="closeGame()">X</button>

    <div class="gameIframe" id="slotplaybtn">
        <iframe frameborder="0" src="@Model.GameLink" allowfullscreen="true">
        </iframe>
    </div>

</div>

<!-- é»‘å¹•å±¤ -->
<div id="loginOverlay" class="login-overlay"></div>


<script>
    const isAuthenticated = @(isAuthenticated.ToString().ToLower());

    function closeGame() {
        window.history.back();
    }

    // ğŸ§© é é¢è¼‰å…¥å¾Œåˆ¤æ–·æ˜¯å¦ç™»å…¥
    window.addEventListener('DOMContentLoaded', () => {
        if (!isAuthenticated) {
            const overlay = document.getElementById('loginOverlay');
            overlay.classList.add('show'); // é¡¯ç¤ºé»‘å¹•
            setTimeout(() => {
                alert('è«‹å…ˆç™»å…¥æ‰èƒ½é€²è¡ŒæŠ•æ³¨');
                window.location.href = '/Member/Login'; // å¯é¸ï¼šç™»å…¥å°å‘
            }, 300); // å»¶é²0.3ç§’è®“é»‘å¹•å…ˆå‡ºç¾
        }
    });

</script>